# _Setup_ do ambiente local com Docker

Com o docker rodando em seu computador, execute o comando `docker run --publish 80:80 --publish 22:22 --hostname localhost wlsf82/gitlab-ce` e aguarde at√© o ambiente inicializar.

> üïê Isso por levar alguns minutos.
>
> ‚òï Portanto, recomendo pegar um caf√© (ou um ch√°) enquanto aguarda.
>
> ‚ùóSe voc√™ possui um computador com processador M1, utilize a seguinte imagem `yrzr/gitlab-ce-arm64v8`, em vez da imagem `wlsf82/gitlab-ce`.
>
> ‚ö†Ô∏è **Vale lembrar que tal imagem (`yrzr/gitlab-ce-arm64v8`) n√£o √© mantida pela Talking About Testing, e portanto, os seletores CSS dispon√≠veis durante as aulas do curso podem n√£o ser os mesmos. Neste caso, voc√™ ter√° que encontrar seletores compat√≠veis por conta pr√≥pria.**
>
> Para aprender mais sobre seletores CSS, assista aos v√≠deos da _playlist_ [Seletores CSS para QAs](https://www.youtube.com/playlist?list=PL-eblSNRj0QHGg3iE2HAtOkzIyNH9DSjL) do Canal TAT no YouTube.
>
> **Al√©m disso, assista a _Live_ [Como corrigir os testes quando a aplica√ß√£o muda e "quebra" tudo?](https://www.youtube.com/live/d-snu1qKdHk?feature=share), a qual ser√° de grande ajuda. üòâ**

Depois de alguns minutos, acesse a URL http://localhost para definir a senha do usu√°rio `root`.

## Definindo a senha do usu√°rio `root`

Ao acessar a URL http://localhost, voc√™ deve ver uma p√°gina para trocar a senha do usu√°rio `root`, conforme abaixo:

![GitLab reset password page](./assets/please-create-a-password-for-your-new-account.png)

Digite uma senha, confirme a mesma e clique no bot√£o _Change your password_.

> A senha definida aqui ser√° usada na aula 1, portanto, use uma senha que ir√° se lembrar (ou tome nota).
>
> ‚ùóSe voc√™ possui um computador com processador M1 e utilizou a  imagem `yrzr/gitlab-ce-arm64v8`, a senha do usu√°rio `root` j√° estar√° definida e voc√™ precisar√° redefin√≠-la. Para isso, siga os seguintes passos, descritos por um dos alunos do curso:
>
> Antes de tudo, √© preciso ter baixado a interface Docker pro Mac.
>
> 1 - No Docker Desktop, v√° para o terminal da imagem que voc√™ est√° utilizando (a imagem precisa estar rodando)
> 
> 2 - No terminal, use o comando `gitlab-rake gitlab:password:reset`
> 
> 3 - Depois de alguns segundos, o terminal vai perguntar para qual usu√°rio voc√™ deseja trocar a senha, o qual nesse caso, ser√° o `root`
> 
> 4 - O terminal vai pedir para voc√™ digitar a nova senha e confirmar. Logo depois, voc√™ ser√° informado(a) que a senha foi trocada com sucesso!
>
> Cr√©ditos para o Jhuan Magno Pisa Neves. Obrigado!

## Criando um Access Token

1. Fa√ßa login com o usu√°rio `root` com a senha definida na se√ß√£o anterior
2. Clique no avatar do usu√°rio no canto superior direito da tela; clique no link _Settings_, e ent√£o; clique na op√ß√£o _Access Tokens_ (no menu lateral esquerdo)
3. No campo nome, digite o valor `cypress-intermediario-v2`; na se√ß√£o _Scopes_ marque a op√ß√£o **api**; e ent√£o, clique no bot√£o _Create personal access token_.

> Uma mensagem de que o _token_ foi criado com sucesso deve ser exibida, al√©m do _token_ propriamente dito. **Copie o _token_ clicando no bot√£o √† direita do campo e guarde-o para utilizar na aula 1**.

## Adicionando uma chave SSH

1. No terminal de linha de comando, digite o seguinte comando e pressione ENTER `ssh-keygen -t ed25519 -C "root@example.com"`
2. Ser√° solicitado um caminho para salvar a chave. Pressione ENTER para aceitar o caminho padr√£o
3. Ser√° solicitada uma senha. Pressione ENTER para que a senha n√£o seja necess√°ria
4. Ser√° solicitado que repita a senha. Pressione ENTER novamente para que a senha n√£o seja necess√°ria
5. De novo no terminal de linha de comando, digite o seguinte comando e pressione ENTER para copiar a chave p√∫blica rec√©m criada para a √°rea de transfer√™ncia `pbcopy < ~/.ssh/id_ed25519.pub`
6. Logado na aplica√ß√£o com o usu√°rio `root`, clique no avatar do usu√°rio no canto superior direito da tela; clique no link _Settings_; e ent√£o, clique na op√ß√£o _SSH Keys_ (no menu lateral esquerdo)
7. Cole sua chave SSH p√∫blica no campo key. O campo _Title_ deve ser automaticamente preenchido
8. Por fim, clique no bot√£o _Add key_.

> Voc√™ tamb√©m encontrar√° instru√ß√µes sobre como gerar a chave SSH em sistema operacional Windows na pr√≥pria aplica√ß√£o em teste (rodando em seu ambiente local com Docker) a partir da seguinte URL http://localhost/help/ssh/README#generating-a-new-ssh-key-pair (**instru√ß√µes em Ingl√™s**).

___

Ok, o ambiente local est√° pronto!

V√° para a [aula 1](./1.md) para fazer o _setup_ do projeto de testes com Cypress.
